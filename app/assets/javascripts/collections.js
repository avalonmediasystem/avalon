// Generated by CoffeeScript 1.6.2
var CollectionSelectbox, MediaObjectSelectBox;

window.CollectionSelectBox = CollectionSelectbox = (function() {
  function CollectionSelectbox(url, collectionSelections) {
    this.url = url;
    this.collectionSelections = collectionSelections;
  }

  return CollectionSelectbox;

})();

window.MediaObjectSelectBox = MediaObjectSelectBox = (function() {
  function MediaObjectSelectBox(url, unitSelections) {
    var _this = this;

    this.url = url;
    this.unitSelections = unitSelections;
    $('#collection_media_object_ids').select2({
      placeholder: 'Search by name or net id',
      minimumInputLength: 3,
      multiple: true,
      width: '500px',
      formatSelection: function(mediaObject, container) {
        var template;

        $(container).empty().append(template);
        template = "<div class=\"\" style=\"float: left;\">\n  <img class='media-object img-circle' src=\"" + mediaObject.thumbnail_url + "\"/>\n</div>\n\n<div class=\"caption\">\n  <h4>" + mediaObject.text + "</h4>\n  <div class='clearfix'/>\n</div>";
        $(container).addClass('inner').append($(template));
        return void 0;
      },
      formatResult: function(mediaObject) {
        if (mediaObject.thumbnail_url == null) {
          mediaObject.text;
        }
        return "<img class='media-object img-circle' src='" + mediaObject.thumbnail_url + "'/> " + mediaObject.text;
      },
      initSelection: function(element, callback) {
        return callback(_this.unitSelections);
      },
      ajax: {
        url: this.url,
        dataType: 'json',
        data: function(term, page) {
          return {
            q: term
          };
        },
        results: function(data, page) {
          return {
            results: data.media_objects
          };
        }
      }
    });
  }

  return MediaObjectSelectBox;

})();
