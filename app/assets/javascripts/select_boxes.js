// Generated by CoffeeScript 1.6.2
var CollectionSelectbox, MediaObjectSelectBox, UserSelectBox;

window.UserSelectBox = UserSelectBox = (function() {
  function UserSelectBox(url, selections) {
    var _this = this;

    this.url = url;
    this.selections = selections;
    $('#managers').select2({
      placeholder: 'Search by name or id',
      minimumInputLength: 7,
      multiple: true,
      width: '500px',
      initSelection: function(element, callback) {
        return callback(_this.selections);
      },
      ajax: {
        url: this.url,
        dataType: 'json',
        data: function(term, page) {
          return {
            q: term
          };
        },
        results: function(data, page) {
          return {
            results: data.users
          };
        }
      }
    });
  }

  return UserSelectBox;

})();

window.CollectionSelectBox = CollectionSelectbox = (function() {
  function CollectionSelectbox(selector, url, collectionSelections) {
    var _this = this;

    this.selector = selector;
    this.url = url;
    this.collectionSelections = collectionSelections;
    $(this.selector).select2({
      placeholder: 'Search by collection name',
      minimumInputLength: 3,
      width: '500px',
      multiple: true,
      formatResult: function(collection) {
        if (collection.thumbnail_url == null) {
          collection.text;
        }
        return this.renderTemplate(collection);
      },
      initSelection: function(element, callback) {
        return callback(_this.collectionSelections);
      },
      ajax: {
        url: this.url,
        dataType: 'json',
        data: function(term, page) {
          return {
            q: term
          };
        },
        results: function(data, page) {
          return {
            results: data.collections
          };
        }
      },
      renderTemplate: function(collection) {
        return "<b>" + collection.text + "</b>";
      }
    });
  }

  return CollectionSelectbox;

})();

window.MediaObjectSelectBox = MediaObjectSelectBox = (function() {
  function MediaObjectSelectBox(url, mediaSelections) {
    var _this = this;

    this.url = url;
    this.mediaSelections = mediaSelections;
    $('#collection_media_object_ids').select2({
      placeholder: 'Search by name or net id',
      minimumInputLength: 3,
      multiple: true,
      width: '500px',
      formatSelection: function(mediaObject, container) {
        $(container).empty().addClass('inner').append($(this.renderTemplate(mediaObject)));
        return void 0;
      },
      formatResult: function(mediaObject) {
        if (mediaObject.thumbnail_url == null) {
          mediaObject.text;
        }
        return this.renderTemplate(mediaObject);
      },
      initSelection: function(element, callback) {
        return callback(_this.mediaSelections);
      },
      ajax: {
        url: this.url,
        dataType: 'json',
        data: function(term, page) {
          return {
            q: term
          };
        },
        results: function(data, page) {
          return {
            results: data.media_objects
          };
        }
      },
      renderTemplate: function(mediaObject) {
        return "<div class=\"\" style=\"float: left;\">\n  <img class='media-object img-circle' src=\"" + mediaObject.thumbnail_url + "\"/>\n</div>\n\n<div class=\"caption\">\n  <h4>" + mediaObject.text + "</h4>\n  <div class='clearfix'/>\n</div>";
      }
    });
  }

  return MediaObjectSelectBox;

})();
